(()=>{"use strict";function t(t){return String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}jQuery((function(a){!function(t){"undefined"!=typeof contact_list_settings&&1==contact_list_settings.focus_on_search_field&&(t("#search-contacts").focus(),t(".contact-list-simple-search-contacts").focus())}(a),function(t){var a="";t(".contact-list-ajax-form select").change((function(){var a=t(this).closest("form"),c=a.data("elem-class");t("."+c+" #search-contacts").val(""),t("."+c+" .contact-list-navigation").hide(),t("."+c+" .contact-list-pagination-improved").hide(),t("."+c+" .contact-list-basic-nothing-found").hide(),t("."+c+" .contact-list-basic-contacts-found").hide(),t("."+c+" .contact-list-basic-all-contacts-container #contact-list-search").hide();var n={action:"cl_get_contacts",cl_1:a.find('select[name="cl_1"]').val(),cl_2:a.find('select[name="cl_2"]').val(),cl_3:a.find('select[name="cl_3"]').val(),cl_cat:a.find('select[name="cl_cat"]').val(),cl_atts:a.find('input[name="cl_atts"]').val()};jQuery.post(ajaxurl,n,(function(a){var n=a.replace(/0$/,"");t("."+c+" .contact-list-ajax-results").show(),t("."+c+" .contact-list-ajax-results").empty().append(n);var s="./?"+t("."+c+" .contact-list-ajax-form select").serialize();window.history.pushState({urlPath:s},"",s)}))})),t(".contact-list-search-contacts").keyup((function(){var c,n,s,e,i=t(this).data("elem-class");n=(c=t("."+i+" #search-contacts")).val().toUpperCase(),s=t("."+i+" .contact-list-basic-all-contacts-container #all-contacts li");for(var o=0,l=0,d=0;d<s.length;d++)void 0!==(e=s[d].getElementsByClassName("contact-list-main-elements")[0])&&(e.textContent.toUpperCase().indexOf(n)>-1?(s[d].style.display="",l++):(s[d].style.display="none",o++));var r="."+i;if(1==parseInt(t(r).data("search-type"))){var p=c.val();if(a!=p){var m={action:"contact_list_search_log",search:p,post_id:t(r).data("post-id")};jQuery.post(ajaxurl,m,(function(t){t.replace(/0$/,"")})),a=p}}""==c.val()?(t("."+i+" .contact-list-basic-all-contacts-container #contact-list-search").hide(),t("."+i+" .contact-list-basic-nothing-found").hide(),t("."+i+" .contact-list-basic-contacts-found").hide(),t("."+i+" .contact-list-navigation").show(),t("."+i+" .contact-list-pagination-improved").show(),t("."+i+" .contact-list-ajax-results").show()):s.length==o?(t("."+i+" .contact-list-basic-all-contacts-container #contact-list-search").hide(),t("."+i+" .contact-list-basic-nothing-found").show(),t("."+i+" .contact-list-basic-contacts-found").hide(),t("."+i+" .contact-list-navigation").hide(),t("."+i+" .contact-list-pagination-improved").hide(),t("."+i+" .contact-list-ajax-results").hide()):(t("."+i+" .contact-list-basic-all-contacts-container #contact-list-search").show(),t("."+i+" .contact-list-basic-nothing-found").hide(),t("."+i+" .contact-list-basic-contacts-found").html(l+" "+(l>1?t("."+i+" .contact-list-text-contacts").html():t("."+i+" .contact-list-text-contact").html())+" "+t("."+i+" .contact-list-text-found").html()+"."),t("."+i+" .contact-list-basic-contacts-found").show(),t("."+i+" .contact-list-navigation").hide(),t("."+i+" .contact-list-pagination-improved").hide(),t("."+i+" .contact-list-ajax-results").hide())}))}(a),function(t){var a="";t(".contact-list-simple-search-contacts:not('.contact-list-ajax')").keyup((function(){var c,n,s,e=t(this).data("elem-class"),i=t(this).hasClass("contact-list-ajax-active");n=(c=t("."+e+" .contact-list-simple-search-contacts")).val().toUpperCase(),s=t("."+e+" .contact-list-simple-all-contacts-container .contact-list-simple-list-row-data"),i&&(s=t("."+e+" .contact-list-simple-ajax-results .contact-list-simple-list .contact-list-simple-list-row-data")),t("."+e+" .contact-list-simple-list").addClass("contact-list-simple-list-search-active");for(var o=0,l=0,d=0;d<s.length;d++)s[d].textContent.toUpperCase().indexOf(n)>-1?(s[d].style.display="",l++):(s[d].style.display="none",o++);var r="."+e;if(1==parseInt(t(r).data("search-type"))){var p=t("."+e+" .contact-list-simple-search-contacts").val();if(a!=p){var m={action:"contact_list_search_log",search:p,post_id:t(r).data("post-id")};jQuery.post(ajaxurl,m,(function(t){t.replace(/0$/,"")})),a=p}}t("."+e+" .contact-list-send-group-email-container").hide(),i?(t("."+e+" .contact-list-simple-all-contacts-container .contact-list-simple-list-container").hide(),t("."+e+" .contact-list-simple-ajax-results .contact-list-simple-list-container").show(),t("."+e+" .contact-list-navigation").hide(),t("."+e+" .contact-list-pagination-improved").hide(),""==c.val()?(t("."+e+" .contact-list-simple-nothing-found").hide(),t("."+e+" .contact-list-simple-contacts-found").hide(),t("."+e+" .contact-list-simple-ajax-results").show()):s.length==o?(t("."+e+" .contact-list-simple-nothing-found").show(),t("."+e+" .contact-list-simple-contacts-found").hide(),t("."+e+" .contact-list-simple-ajax-results").hide()):(t("."+e+" .contact-list-simple-nothing-found").hide(),t("."+e+" .contact-list-simple-contacts-found").html(l+" "+(l>1?t("."+e+" .contact-list-simple-text-contacts").html():t("."+e+" .contact-list-simple-text-contact").html())+" "+t("."+e+" .contact-list-simple-text-found").html()+"."),t("."+e+" .contact-list-simple-contacts-found").show(),t("."+e+" .contact-list-simple-ajax-results").show())):""==c.val()?(t("."+e+" .contact-list-simple-all-contacts-container .contact-list-simple-list-container").hide(),t("."+e+" .contact-list-simple-paginated-container .contact-list-simple-list-container").show(),t("."+e+" .contact-list-navigation").show(),t("."+e+" .contact-list-pagination-improved").show(),t("."+e+" .contact-list-simple-nothing-found").hide(),t("."+e+" .contact-list-simple-contacts-found").hide()):s.length==o?(t("."+e+" .contact-list-simple-all-contacts-container .contact-list-simple-list-container").hide(),t("."+e+" .contact-list-simple-paginated-container .contact-list-simple-list-container").hide(),t("."+e+" .contact-list-navigation").hide(),t("."+e+" .contact-list-pagination-improved").hide(),t("."+e+" .contact-list-simple-nothing-found").show(),t("."+e+" .contact-list-simple-contacts-found").hide()):(t("."+e+" .contact-list-simple-all-contacts-container .contact-list-simple-list-container").show(),t("."+e+" .contact-list-simple-paginated-container .contact-list-simple-list-container").hide(),t("."+e+" .contact-list-navigation").hide(),t("."+e+" .contact-list-pagination-improved").hide(),t("."+e+" .contact-list-simple-nothing-found").hide(),t("."+e+" .contact-list-simple-contacts-found").html(l+" "+(l>1?t("."+e+" .contact-list-simple-text-contacts").html():t("."+e+" .contact-list-simple-text-contact").html())+" "+t("."+e+" .contact-list-simple-text-found").html()+"."),t("."+e+" .contact-list-simple-contacts-found").show()),t("."+e+" .contact-list-simple-list-row-data:visible:even").css("background","#fff"),t("."+e+" .contact-list-simple-list-row-data:visible:odd").css("background","rgb(248, 248, 248)")}))}(a),function(t){t(document).on("click",".cl-modal-container-contact",(function(a){if(a.target===this){var c=t(this).data("contact-id");c?t(".cl-modal-container-"+c).hide():t(".cl-modal-container").hide()}})),t(document).on("click",".cl-close-modal",(function(a){a.preventDefault();var c=t(this).data("contact-id");c?t(".cl-modal-container-"+c).hide():t(".cl-modal-container").hide()}))}(a),function(a){a(document).on("click",".contact-list-send-email a",(function(t){t.preventDefault(),a(".contact-list-sender-name").val(""),a(".contact-list-sender-email").val(""),a(".contact-list-recipient").empty().append(a(this).data("name")),a(".contact-list-contact-id").val(a(this).data("id")),a(".contact-list-message").val(""),a(".contact-list-sending-message").empty().append(""),a(".contact-list-message-error").empty().append(""),a(".contact-list-send-single-submit").attr("disabled",!1),a(".cl-modal-container").hide(),a(".cl-modal-container-send-message").show();var c=a(".cl-modal-container-send-message"),n=c.find('a[href]:not(.cl-close-modal), area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, [tabindex="0"], [contenteditable]').filter(":visible"),s=n.first(),e=n.last();s.focus(),c.on("keydown",(function(t){"Tab"===t.key&&(t.shiftKey?document.activeElement===s[0]&&(e.focus(),t.preventDefault()):document.activeElement===e[0]&&(s.focus(),t.preventDefault()))}))})),a(".contact-list-send-single").submit((function(c){c.preventDefault();var n,s=this,e=a(this),i=t(s.sender_name.value),o=t(s.sender_email.value),l=t(s.contact_id.value),d=t(s.site_url.value),r=t(s.txt_please_msg_first.value),p=t(s.txt_msg_sent_to.value),m=t(s.txt_sending_please_wait.value),h=t(s.txt_new_msg_from.value),u=t(s.txt_sent_by.value),f=t(s.txt_please_sender_details_first.value),v=parseInt(e.find('input[name="close_modal_in_secs"]').val()),g=h+" "+d,_="",x=s.message.value;if(s.sender_name.value.length<3||(n=s.sender_email.value,!/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(n)))return a(".contact-list-message-error").empty().append(f),!1;if(s.message.value.length<3)return a(".contact-list-message-error").empty().append(r),!1;a(".contact-list-message-error").empty().append(""),s.send_message.disabled=!0,i?_=i:o&&(_=o),i&&(g=h+" "+d+" â€“ "+u+" "+_);var b=".contact-list-sending-message";a(b).empty().append(m);var y={action:"cl_send_mail_public",subject:g,sender_name:i,sender_email:o,body:x,contact_id:l};jQuery.post(ajaxurl,y,(function(t){"OK"==t?(a(b).empty().append("<strong>"+p+"</strong>"),v>0&&setTimeout((function(){a(".cl-modal-container").hide()}),1e3*v)):""==t?a(b).empty().append('<strong style="color: crimson;">ERROR</strong>'):a(b).empty().append('<strong style="color: crimson;">'+t+"</strong>"),a(b).show()}))}))}(a)}))})();